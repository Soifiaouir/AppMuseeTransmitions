<VirtualHost *:8080>
    ServerName localhost

    # Le dossier public de Symfony
    DocumentRoot /var/www/html/public

    <Directory /var/www/html/public>
        # Autorise .htaccess à surcharger la config
        AllowOverride All

        # Autorise l'accès à tout le monde
        Require all granted

        # Redirige tout vers index.php (routing Symfony)
        FallbackResource /index.php
    </Directory>

    # Exception : les assets (CSS, JS, images) ne passent pas par index.php
    <Directory /var/www/html/public/bundles>
        FallbackResource disabled
    </Directory>

    # Exception : les uploads ne passent pas par index.php
    <Directory /var/www/html/public/uploads>
        FallbackResource disabled
    </Directory>

    # Logs d'erreur et d'accès
    ErrorLog ${APACHE_LOG_DIR}/symfony_error.log
    CustomLog ${APACHE_LOG_DIR}/symfony_access.log combined
</VirtualHost>