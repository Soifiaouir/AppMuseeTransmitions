{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | Liste des m√©dias{% endblock %}

{% block body %}
    <h2>Gestion des m√©dias du mus√©e</h2>

    {% if medias|length == 0 %}
        <p>Pas de m√©dia dans la base de donn√©es</p>
    {% else %}
        <table>
            <thead>
            <tr>
                <th>Aper√ßu</th>
                <th>Nom original</th>
                <th>Type</th>
                <th>Taille</th>
                <th>Date d'upload</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for media in medias %}
                <tr>
                    <td>
                        {% if media.type == 'image' %}
                            <img src="{{ asset('uploads/media/' ~ media.filePath) }}"
                                 alt="{{ media.userGivenName }}"
                                 style="max-width: 100px; max-height: 100px;">
                        {% elseif media.type == 'video' %}
                            üé•
                        {% elseif media.type == 'audio' %}
                            üîä
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ path('media_detail', {'id': media.id}) }}">
                            {{ media.userGivenName }}
                        </a>
                    </td>
                    <td>{{ media.type }}</td>
                    <td>
                        {% if media.size %}
                            {{ (media.size / 1024 / 1024)|number_format(2) }} MB
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>{{ media.uploadedAt|date('d/m/Y H:i') }}</td>
                    <td>
                        <a href="{{ path('media_edit', {'id': media.id}) }}" class="buttonEdit">Modifier</a>
                        <a href="{{ path('media_remove', {'id': media.id}) }}"
                           class="buttonDelete"
                           onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer ce m√©dia ?');">
                            Supprimer
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}
    <a href="{{ path('media_add') }}" class="buttonCreate">Ajouter un m√©dia</a>
{% endblock %}