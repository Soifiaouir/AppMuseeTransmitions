{% extends 'base.html.twig' %}

{% block title %}Liste des mÃ©dias{% endblock %}

{% block body %}
    <h2>Gestion des mÃ©dias du musÃ©e</h2>
    <a href="{{ path('media_add') }}" class="buttonCreate">Ajouter un mÃ©dia</a>

    {% if medias|length == 0 %}
        <p>Pas de mÃ©dia dans la base de donnÃ©es</p>
    {% else %}
        <table>
            <thead>
            <tr>
                <th>AperÃ§u</th>
                <th>Nom original</th>
                <th>Type</th>
                <th>Taille</th>
                <th>Date d'upload</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for media in medias %}
                <tr>
                    <td>
                        {% if media.type == 'image' %}
                            <img src="{{ asset('uploads/media/' ~ media.type ~ '/' ~ media.fullFileName) }}"
                                 alt="{{ media.userGivenName }}"
                                 style="max-width: 15%; height: auto;">
                        {% elseif media.type == 'video' %}
                            ðŸŽ¥
                        {% elseif media.type == 'audio' %}
                            ðŸ”Š
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ path('media_detail', {'id': media.id}) }}">
                            {{ media.userGivenName }}
                        </a>
                    </td>
                    <td>{{ media.type }}</td>
                    <td>
                        {% if media.size %}
                            {{ (media.size / 1024 / 1024)|number_format(2) }} MB
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>{{ media.uploadedAt|date('d/m/Y H:i') }}</td>
                    <td>
                        <a href="{{ path('media_edit', {'id': media.id}) }}" class="buttonEdit">Modifier</a>
                        <a href="{{ path('media_remove', {'id': media.id}) }}"
                           class="buttonDelete"
                           onclick="return confirm('ÃŠtes-vous sÃ»r de vouloir supprimer ce mÃ©dia ?');">
                            Supprimer
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {% if maxPages > 1 %}

            {# Page prÃ©cÃ©dente #}
            {% if currentPage > 1 %}
                <a href="{{ path('media_list', {'page': currentPage - 1}) }}"  class="buttonEdit">
                    Â« PrÃ©cÃ©dent
                </a>
            {% endif %}

            {# Page suivante #}
            {% if currentPage < maxPages %}
                <a href="{{ path('media_list', {'page': currentPage + 1}) }}" class="buttonEdit">
                    Suivant Â»
                </a>
            {% endif %}

        {% endif %}
    {% endif %}
{% endblock %}