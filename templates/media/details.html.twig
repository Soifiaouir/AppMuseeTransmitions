{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | Détail de {{ media.userGivenName }}{% endblock %}

{% block body %}
    <h2>{{ media.userGivenName }}</h2>

    <div class="media-details">
        {# Aperçu du média #}
        <div class="media-preview">
            {% if media.type == 'image' %}
                <img src="{{ asset('uploads/media/' ~ media.type ~ '/' ~ media.fullFileName) }}"
                     alt="{{ media.userGivenName }}"
                     style="max-width: 100%; height: auto;">
            {% elseif media.type == 'video' %}
                <video controls style="max-width: 100%;">
                    <source src="{{ asset('uploads/media/' ~ media.type ~ '/' ~ media.fullFileName) }}"
                            type="video/{{ media.extensionFile }}">
                    Votre navigateur ne supporte pas la lecture de vidéos.
                </video>
            {% elseif media.type == 'audio' %}
                <audio controls style="width: 100%;">
                    <source src="{{ asset('uploads/media/' ~ media.type ~ '/' ~ media.fullFileName) }}"
                            type="audio/{{ media.extensionFile }}">
                    Votre navigateur ne supporte pas la lecture audio.
                </audio>
            {% endif %}
        </div>

        {# Informations du média #}
        <div class="media-info">
            <p><strong>Type :</strong> {{ media.type }}</p>
            <p><strong>Extension :</strong> {{ media.extensionFile }}</p>
            <p><strong>Taille :</strong>
                {% if media.size %}
                    {{ (media.size / 1024 / 1024)|number_format(2) }} MB
                {% else %}
                    N/A
                {% endif %}
            </p>
            <p><strong>Date d'upload :</strong> {{ media.uploadedAt|date('d/m/Y à H:i:s') }}</p>
            <p><strong>Nom du fichier :</strong> {{ media.fullFileName }}</p>
        </div>

        {# Cartes associées #}
        {% if media.cards|length > 0 %}
            <div class="associated-cards">
                <h3>Cartes associées</h3>
                <ul>
                    {% for card in media.cards %}
                        <li>
                            <a href="{{ path('cards_details', {'id': card.id}) }}">
                                {{ card.title }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        {# Thèmes associés #}
        {% if media.themes|length > 0 %}
            <div class="associated-themes">
                <h3>Thèmes associés</h3>
                <ul>
                    {% for theme in media.themes %}
                        <li>
                            <a href="{{ path('details_theme', {'id': theme.id}) }}">
                                {{ theme.name }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>

    <div class="actions">
        <a href="{{ path('media_edit', {'id': media.id}) }}" class="buttonEdit">Modifier</a>
        <a href="{{ path('media_remove', {'id': media.id}) }}"
           class="buttonDelete"
           onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce média ?');">
            Supprimer
        </a>
        <a href="{{ path('media_list') }}" class="buttonBack">Retour à la liste</a>
    </div>
{% endblock %}

